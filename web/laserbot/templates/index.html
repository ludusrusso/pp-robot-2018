{% extends 'layout.html' %}

{% block inside_head %}
<title>LaserBot Battle | Login</title>

<script type="text/javascript">
  /* Check if user was previously logged in */
  if (localStorage.getItem("user")!== null){

    username = localStorage.getItem("user");

    if (confirm("You previously logged as \""+ username + "\".\n" + "Do you want to restore your previous session?")) {
      /* Yes: restore previous session */
      location.href = "/home";
    }
    else {
      /* No: remove previous session */
      delUser(username);
    }
  }

  /* when whole page is loaded */
  $(document).ready(function(){

    /* enable login at enter key press */
    $("#username").on('keypress', function(event) {
      if (event.keyCode == 13) userLogin();
    })
    
  });

</script>
{% endblock %}

{% block body %}
<body class="login">

  <!-- Automatic element centering -->
  <div class="login-wrapper">
    <div class="login-logo">
      <b>LaserBot</b> Battle
    </div>
    <!-- Login info -->
    <div class="login-name">LOGIN</div>

    <!-- START LOGIN SCREEN ITEM -->
    <div class="login-item">

      <!-- user image -->
      <div class="login-image">
        <img src="static/img/avatar0.png" alt="user image" 
        title="Click to change avatar" id="userImage" onclick="changeImage()">
      </div>
      <!-- /.user-image -->

      <!-- user credentials -->
      <div class="login-credentials">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="username" id="username" required autofocus>
          <div class="input-group-btn">
            <button class="btn" onclick="userLogin()" title="Start!">
              <i class="fa fa-arrow-right text-muted"></i>
            </button>
          </div>
        </div>
      </div><!-- /.user credentials -->
    </div><!-- /.login-item -->

    <div class='text-center'>
      <a href="/home"><small>Restore previous session if any</small></a>
    </div>
    <div class='login-footer text-center'>
      <b><a href="/about" class='text-black'>ABOUT</a></b>
    </div>
  </div><!-- /.center -->

</body>
{% endblock %}