<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>LaserBot Battle</title>

  <!--Scalable content -->
  <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
  <!-- Bootstrap 4.0.0 -->
  <link href="static/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />    
  <!-- FontAwesome 4.7.0 -->
  <link href="static/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
  <!-- Ionicons 2.0.1 -->
  <link href="static/ionicons-2.0.1/css/ionicons.min.css" rel="stylesheet" type="text/css" />    
  <!-- Theme style -->
  <link href="static/css/app.min.css" rel="stylesheet" type="text/css" />
  <!-- App Skins -->
  <link href="static/css/skins/_all-skins.min.css" rel="stylesheet" type="text/css" />


  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
  <![endif]-->

  <script type="text/javascript">

    if (localStorage.getItem("name") !== null){
      if (confirm("You previously logged as \""+ localStorage.getItem("name") + "\".\n"
        + "Do you want to restore your previous session?")) {
        // Yes
      location.href = "home.html";
    } else {
        // No
        localStorage.removeItem("name");
      }
    }


    function userLogin() {
      if (typeof(Storage) !== "undefined") {
        // Browser support local storage
        var name = document.getElementById('username').value;

        //Check if username is blank or already taken
        if (name == ""){
          alert("You can't start without choosing a username!");
        } else if (localStorage.getItem("name") !== name){
          //TODO: modify above check to check all usernames

          localStorage.setItem('name', name);
          //Redirect to home page
          location.href = "home.html";
        } else {
          alert("The username \"" +name+ "\" is already taken! Choose another one.");
        }
      } else {
        // Sorry! No Web Storage support..
        alert("This browser does not support local storage!");
      }
    }
  </script>

</head>

<body class="skin-blue">
  <div class="wrapper">

    <div class="content-wrapper">
      <!-- Content Header (Page header) -->
      <section class="content-header">
        <h1>
          LaserBot Battle
          <small>Login page</small>
        </h1>
      </section>

      <!-- Main content -->
      <section class="content">
        <div class="row">

          <div class="col-md-6">
            <p>
              Projext description text
            </p>
          </div><!--/.col (left) -->

          <!-- Login Form -->
          <div class="col-md-6">
            <div class="box box-info">
              <div class="box-header">
                <h3 class="box-title">Chose a user name:</h3>
              </div>
              <div class="box-body">
                <div class="input-group input-group-sm">
                  <input type="text" class="form-control" id="username">
                  <span class="input-group-btn">
                    <button class="btn btn-info btn-flat" type="button" onclick="userLogin()">Start!</button>
                  </span>
                </div><!-- /input-group -->
              </div><!-- /.box-body -->
            </div><!-- /.box -->
          </div><!--/.col (right) -->

        </div>   <!-- /.row -->

      </section><!-- /.content -->
    </div><!-- /.content-wrapper -->

    <footer class="main-footer">
      <div class="pull-right hidden-xs">
        <b>Version</b> 0.1
      </div>
      <strong>Copyright &copy; 2018 <a href="https://github.com/ludusrusso/pp-robot-2018">
      pp-robot-2018 group</a>.</strong> All rights reserved.
    </footer>
  </div><!-- ./wrapper -->

  <!-- jQuery 2.1.3 -->
  <script src="static/jquery-2.1.3/jQuery-2.1.3.min.js"></script>
  <!-- jQuery UI 1.11.4 -->
  <script src="static/jquery-ui-1.11.4/jquery-ui.min.js" type="text/javascript"></script>
  <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
  <script>
    $.widget.bridge('uibutton', $.ui.button);
  </script>
  <!-- Bootstrap 4.0.0 JS -->
  <script src="static/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>    
  <!-- Bootstrap WYSIHTML5 -->
  <script src="static/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js" type="text/javascript"></script>

  <!-- App -->
  <script src="static/js/app.js" type="text/javascript"></script>

</body>

</html> 